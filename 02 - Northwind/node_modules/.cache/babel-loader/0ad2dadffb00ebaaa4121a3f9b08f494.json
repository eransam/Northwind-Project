{"ast":null,"code":"import _objectSpread from\"C:/Users/erans/OneDrive/\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4/\\u200F\\u200F\\u05EA\\u05D9\\u05E7\\u05D9\\u05D4 \\u05D7\\u05D3\\u05E9\\u05D4/02 - Northwind/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/erans/OneDrive/\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4/\\u200F\\u200F\\u05EA\\u05D9\\u05E7\\u05D9\\u05D4 \\u05D7\\u05D3\\u05E9\\u05D4/02 - Northwind/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\erans\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\\\u200F\\u200F\\u05EA\\u05D9\\u05E7\\u05D9\\u05D4 \\u05D7\\u05D3\\u05E9\\u05D4\\\\02 - Northwind\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{useNavigate,useParams}from\"react-router-dom\";import notify from\"../../../Services/NotifyService\";import productsService from\"../../../Services/ProductsService\";import\"./UpdateProduct.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateProduct(){var _formState$errors$nam,_formState$errors$pri,_formState$errors$sto;var params=useParams();var id=+params.id;var navigate=useNavigate();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,formState=_useForm.formState,setValue=_useForm.setValue;useEffect(function(){productsService.getOneProduct(id).then(function(product){setValue(\"name\",product.name);setValue(\"price\",product.price);setValue(\"stock\",product.stock);}).catch(function(err){return notify.error(err);});},[]);function submit(_x){return _submit.apply(this,arguments);}function _submit(){_submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(product){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;product.id=id;_context.next=4;return productsService.updateProduct(product);case 4:notify.success(\"Product updated.\");// Navigate back to all products: \nnavigate(\"/products\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);notify.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _submit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"UpdateProduct Box\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(submit),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Product\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Name: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\"},register(\"name\",{required:{value:true,message:\"Missing product name\"}}))),/*#__PURE__*/_jsx(\"span\",{children:(_formState$errors$nam=formState.errors.name)===null||_formState$errors$nam===void 0?void 0:_formState$errors$nam.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Price: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",step:\"0.01\"},register(\"price\",{required:{value:true,message:\"Missing price\"},min:{value:0,message:\"Price can't be negative\"},max:{value:1000,message:\"Price can't exceed 1000\"}}))),/*#__PURE__*/_jsx(\"span\",{children:(_formState$errors$pri=formState.errors.price)===null||_formState$errors$pri===void 0?void 0:_formState$errors$pri.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Stock: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\"},register(\"stock\",{required:{value:true,message:\"Missing stock\"},min:{value:0,message:\"Stock can't be negative\"},max:{value:1000,message:\"Stock can't exceed 1000\"}}))),/*#__PURE__*/_jsx(\"span\",{children:(_formState$errors$sto=formState.errors.stock)===null||_formState$errors$sto===void 0?void 0:_formState$errors$sto.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Image: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"file\",accept:\"image/*\"},register(\"image\"))),/*#__PURE__*/_jsx(\"button\",{children:\"Update\"})]})});}export default UpdateProduct;","map":{"version":3,"sources":["C:/Users/erans/OneDrive/שולחן העבודה/‏‏תיקיה חדשה/02 - Northwind/src/Components/ProductsArea/UpdateProduct/UpdateProduct.tsx"],"names":["useEffect","useForm","useNavigate","useParams","notify","productsService","UpdateProduct","params","id","navigate","register","handleSubmit","formState","setValue","getOneProduct","then","product","name","price","stock","catch","err","error","submit","updateProduct","success","required","value","message","errors","min","max"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport ProductModel from \"../../../Models/ProductModel\";\nimport notify from \"../../../Services/NotifyService\";\nimport productsService from \"../../../Services/ProductsService\";\nimport \"./UpdateProduct.css\";\n\nfunction UpdateProduct(): JSX.Element {\n\n    const params = useParams();\n    const id = +params.id;\n\n    const navigate = useNavigate();\n\n    const { register, handleSubmit, formState, setValue } = useForm<ProductModel>();\n\n    useEffect(() => {\n        productsService.getOneProduct(id)\n            .then(product => {\n                setValue(\"name\", product.name);\n                setValue(\"price\", product.price);\n                setValue(\"stock\", product.stock);\n            })\n            .catch(err => notify.error(err));\n    }, []);\n\n    async function submit(product: ProductModel) {\n        try {\n\n            product.id = id;\n            await productsService.updateProduct(product);\n\n            notify.success(\"Product updated.\");\n\n            // Navigate back to all products: \n            navigate(\"/products\");\n        }\n        catch (err: any) {\n            notify.error(err);\n        }\n    }\n\n    return (\n        <div className=\"UpdateProduct Box\">\n\n            <form onSubmit={handleSubmit(submit)}>\n\n                <h2>Edit Product</h2>\n\n                <label>Name: </label>\n                <input type=\"text\" {...register(\"name\", {\n                    required: { value: true, message: \"Missing product name\" }\n                })} />\n                <span>{formState.errors.name?.message}</span>\n\n                <label>Price: </label>\n                <input type=\"number\" step=\"0.01\" {...register(\"price\", {\n                    required: { value: true, message: \"Missing price\" },\n                    min: { value: 0, message: \"Price can't be negative\" },\n                    max: { value: 1000, message: \"Price can't exceed 1000\" },\n                })} />\n                <span>{formState.errors.price?.message}</span>\n\n                <label>Stock: </label>\n                <input type=\"number\" {...register(\"stock\", {\n                    required: { value: true, message: \"Missing stock\" },\n                    min: { value: 0, message: \"Stock can't be negative\" },\n                    max: { value: 1000, message: \"Stock can't exceed 1000\" },\n                })} />\n                <span>{formState.errors.stock?.message}</span>\n\n                <label>Image: </label>\n                <input type=\"file\" accept=\"image/*\" {...register(\"image\")} />\n\n                <button>Update</button>\n\n            </form>\n\n        </div>\n    );\n}\n\nexport default UpdateProduct;\n"]},"metadata":{},"sourceType":"module"}